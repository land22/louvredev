{% extends "LWLouvreBundle::layout.html.twig" %}
{%block container%}

	        
             
	 
   
<div class="form">
	
			{{ form_start(form, {'attr': {'class': 'form-inline'}}) }} 
			{# Les erreurs générales du formulaire. #} 
			{{ form_errors(form) }}
	
			<div id="form_louvre">
				<div class="form-group">
			    	<label for="nbBillets">Choisissez un mombre de billets</label>
			    	<input type="number" class="form-control nbr_billet" id="nbBillets" aria-describedby="Saisir le nombre de billets" min="1" placeholder="Saisir le nombre de billets">			    	
			  	</div>
				<div class="form-group">
					{{ form_label(form.visiteDate, "Date de votre visite", {'label_attr': {'class': 'datevisitlabel'}}) }} 
					{{ form_errors(form.visiteDate) }} 
					{{ form_widget(form.visiteDate,{'attr': {'class': 'datepicker form-controlx date_vit'}}) }}
				</div>
				<div class="form-group">
					{{ form_label(form.typeOrder, "Type de journée", {'label_attr': {'class': 'typelabel'}}) }}
					{{ form_errors(form.typeOrder) }}
					{{ form_widget(form.typeOrder, {'attr':	{'class': 'type_journee form-control','id':'type_journee'}}) }}
				</div>
				<div class="form-group" style="display: none;">
					{{ form_label(form.email, "Votre adresse email", {'label_attr': {'class': 'emaillabel'}}) }} 
					{{ form_errors(form.email) }}
					{{ form_widget(form.email, {'attr':{'class': 'form-control'}}) }}
				</div>
                                <br />
                                <br />
				<button id="add_billet" class="btn btn-default">Enregistrer les billets</button>
				<div id="billets" style = "display:none;">
					
				</div>
			</div>
			
			
		
		</div>
		<br>
				
		<div class="col-sm-12">
			{# Pour le bouton, pas de label ni d'erreur, on affiche juste le widget 
			{{ form_widget(form.save, {'attr': {'class': 'step1 btn btn-primary'}}) }} #}
		</div>
		<br>
		<br> {# Génération automatique des champs pas encore écrits. Dans cet exemple, ce serait le champ CSRF (géré automatiquement par Symfony !) et tous les champs cachés (type « hidden »). #} 
		{{ form_rest(form) }}
		
		{# Fermeture de la balise <form>du formulaire HTML #}		
		{{ form_end(form) }}
</div>
{%endblock%}
{%block javascript%}
    {{ parent() }}
    <script src="{{ asset('assets/js/datePicker.js')}}"></script>
    <script src="{{ asset('assets/js/checkDate.js')}}"></script>
    <script>
        var date = new Date();
        $('.datepicker').datepicker({
          startDate: '-3d',
          startDate: date,
          daysOfWeekDisabled: "2"
        });
    </script>

    <script>
     	$(function() {
	     	  //varition de la l'option journée et demi journée
	     	  var date_jour = new Date();
              if (date_jour.getHours() > 13) {
	     	 $('.form .type_journee').html('<option value="Demi-journée">Demi-journée</option>');
	     	 }
            //Action exercution lorsqu'on clique sur le lien ajouter un billet
	        $("#add_billet").on("click", function(){
                        //Afficher le contenu du formulaire des billets
                        var ticketsContent = $("#lw_louvrebundle_orders_tickets").attr("data-prototype");
                        for (var i = 0; i<$("#nbBillets").val(); i++) {
                            $("#billets").append(ticketsContent);
                            $("#billets").show();
                        }
	        });
        });

    </script>
    {%endblock%}